mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
rowwise() %>%
summarise(across(where(is.numeric), mean))
View(ock_sum)
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
summarise(across(where(is.numeric), mean))
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
summarise(grp_mean = across(where(is.numeric), mean))
View(ock_sum)
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = across(where(is.numeric), mean))
View(ock_sum)
View(ock_sum)
View(ock_sum)
View(ock_sum)
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = `1` + `2`)
View(ock_sum)
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = (`1` + `2` + `3` + `4`)/4)
View(ock_sum)
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = (`1` + `2` + `3` + `4`)/4) %>%
mutate(across(where(is.numeric), ~ .x/grp_mean))
View(ock_sum)
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = (`1` + `2` + `3` + `4`)/4) %>%
mutate(across(where(is.numeric), ~ .x/grp_mean)) %>%
unite(SpeciesScientific, SpeciesCommon, SpeciesCode, sep = " - ")
View(ock_sum)
?unite
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = (`1` + `2` + `3` + `4`)/4) %>%
mutate(across(where(is.numeric), ~ .x/grp_mean)) %>%
unite(col = spp, SpeciesScientific, SpeciesCommon, SpeciesCode, sep = " - ")
View(ock_sum)
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = (`1` + `2` + `3` + `4`)/4) %>%
mutate(across(where(is.numeric), ~ .x/grp_mean)) %>%
unite(col = spp, SpeciesScientific, SpeciesCommon, SpeciesCode, sep = " - ") %>%
select(-grp_mean)
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = (`1` + `2` + `3` + `4`)/4) %>%
mutate(across(where(is.numeric), ~ .x/grp_mean)) %>%
unite(col = spp, SpeciesScientific, SpeciesCommon, SpeciesCode, sep = " - ") %>%
select(-grp_mean)
ock_sum[oc_sum == 0] <- NA
?replace
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = (`1` + `2` + `3` + `4`)/4) %>%
mutate(across(where(is.numeric), ~ .x/grp_mean)) %>%
unite(col = spp, SpeciesScientific, SpeciesCommon, SpeciesCode, sep = " - ") %>%
select(-grp_mean) %>%
mutate(`1` = replace(`1`,where(`1` == 0), NA))
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = (`1` + `2` + `3` + `4`)/4) %>%
mutate(across(where(is.numeric), ~ .x/grp_mean)) %>%
unite(col = spp, SpeciesScientific, SpeciesCommon, SpeciesCode, sep = " - ") %>%
select(-grp_mean)
ock_sum$`1`[ock_sum$`1` == 0] <- NA
View(ock_sum)
ock_sum$`2`[ock_sum$`2` == 0] <- NA
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = (`1` + `2` + `3` + `4`)/4) %>%
mutate(across(where(is.numeric), ~ .x/grp_mean)) %>%
unite(col = spp, SpeciesScientific, SpeciesCommon, SpeciesCode, sep = " - ") %>%
select(-grp_mean)
ock_sum$`1`[ock_sum$`1` == 0] <- NA
ock_sum$`2`[ock_sum$`2` == 0] <- NA
ock_sum$`3`[ock_sum$`3` == 0] <- NA
ock_sum$`4`[ock_sum$`4` == 0] <- NA
View(ock_sum)
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = (`1` + `2` + `3` + `4`)/4) %>%
mutate(across(where(is.numeric), ~ .x/grp_mean)) %>%
unite(col = spp, SpeciesScientific, SpeciesCommon, SpeciesCode, sep = " - ") %>%
select(-grp_mean)
ock_sum$`1`[ock_sum$`1` == 0] <- NA
ock_sum$`2`[ock_sum$`2` == 0] <- NA
ock_sum$`3`[ock_sum$`3` == 0] <- NA
ock_sum$`4`[ock_sum$`4` == 0] <- NA
ock_sum <-
ock_sum %>%
pivot_longer(-spp, names_to = "segment", values_to = "abund")
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = (`1` + `2` + `3` + `4`)/4) %>%
mutate(across(where(is.numeric), ~ .x/grp_mean)) %>%
unite(col = spp, SpeciesScientific, SpeciesCommon, SpeciesCode, sep = " - ") %>%
select(-grp_mean)
ock_sum$`1`[ock_sum$`1` == 0] <- NA
ock_sum$`2`[ock_sum$`2` == 0] <- NA
ock_sum$`3`[ock_sum$`3` == 0] <- NA
ock_sum$`4`[ock_sum$`4` == 0] <- NA
ock_sum <-
ock_sum %>%
pivot_longer(-spp, names_to = "segment", values_to = "abund") %>%
mutate(segment = as.numeric(segment))
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = (`1` + `2` + `3` + `4`)/4) %>%
mutate(across(where(is.numeric), ~ .x/grp_mean)) %>%
unite(col = spp, SpeciesScientific, SpeciesCommon, SpeciesCode, sep = " - ") %>%
select(-grp_mean)
ock_sum$`1`[ock_sum$`1` == 0] <- NA
ock_sum$`2`[ock_sum$`2` == 0] <- NA
ock_sum$`3`[ock_sum$`3` == 0] <- NA
ock_sum$`4`[ock_sum$`4` == 0] <- NA
ock_sum <-
ock_sum %>%
pivot_longer(-spp, names_to = "segment", values_to = "abund") %>%
mutate(segment = as.numeric(segment))
ggplot(data = ock_sum, aes(x = segment, y = spp, fill = abund)) + geom_raster()
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = (`1` + `2` + `3` + `4`)/4) %>%
mutate(across(where(is.numeric), ~ .x/grp_mean)) %>%
unite(col = spp, SpeciesScientific, SpeciesCommon, SpeciesCode, sep = " - ") %>%
select(-grp_mean)
ock_sum$`1`[ock_sum$`1` == 0] <- NA
ock_sum$`2`[ock_sum$`2` == 0] <- NA
ock_sum$`3`[ock_sum$`3` == 0] <- NA
ock_sum$`4`[ock_sum$`4` == 0] <- NA
ock_sum <-
ock_sum %>%
pivot_longer(-spp, names_to = "segment", values_to = "abund") %>%
mutate(segment = as.numeric(segment))
ggplot(data = ock_sum, aes(x = segment, y = -spp, fill = abund)) + geom_raster()
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = (`1` + `2` + `3` + `4`)/4) %>%
mutate(across(where(is.numeric), ~ .x/grp_mean)) %>%
unite(col = spp, SpeciesScientific, SpeciesCommon, SpeciesCode, sep = " - ") %>%
select(-grp_mean)
ock_sum$`1`[ock_sum$`1` == 0] <- NA
ock_sum$`2`[ock_sum$`2` == 0] <- NA
ock_sum$`3`[ock_sum$`3` == 0] <- NA
ock_sum$`4`[ock_sum$`4` == 0] <- NA
ock_sum <-
ock_sum %>%
pivot_longer(-spp, names_to = "segment", values_to = "abund") %>%
mutate(segment = as.numeric(segment))
ggplot(data = ock_sum, aes(x = segment, y = spp, fill = abund)) + geom_raster()
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = (`1` + `2` + `3` + `4`)/4) %>%
mutate(across(where(is.numeric), ~ .x/grp_mean)) %>%
unite(col = spp, SpeciesScientific, SpeciesCommon, SpeciesCode, sep = " - ") %>%
select(-grp_mean)
ock_sum$`1`[ock_sum$`1` == 0] <- NA
ock_sum$`2`[ock_sum$`2` == 0] <- NA
ock_sum$`3`[ock_sum$`3` == 0] <- NA
ock_sum$`4`[ock_sum$`4` == 0] <- NA
ock_sum <-
ock_sum %>%
pivot_longer(-spp, names_to = "segment", values_to = "abund") %>%
mutate(segment = as.numeric(segment))
ggplot(data = ock_sum, aes(x = segment, y = spp, fill = abund)) + geom_raster() +
scale_y_reverse()
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = (`1` + `2` + `3` + `4`)/4) %>%
mutate(across(where(is.numeric), ~ .x/grp_mean)) %>%
unite(col = spp, SpeciesScientific, SpeciesCommon, SpeciesCode, sep = " - ") %>%
select(-grp_mean)
ock_sum$`1`[ock_sum$`1` == 0] <- NA
ock_sum$`2`[ock_sum$`2` == 0] <- NA
ock_sum$`3`[ock_sum$`3` == 0] <- NA
ock_sum$`4`[ock_sum$`4` == 0] <- NA
ock_sum <-
ock_sum %>%
pivot_longer(-spp, names_to = "segment", values_to = "abund") %>%
mutate(segment = as.numeric(segment))
ggplot(data = ock_sum, aes(x = segment, y = spp, fill = abund)) +
geom_raster()
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = (`1` + `2` + `3` + `4`)/4) %>%
mutate(across(where(is.numeric), ~ .x/grp_mean)) %>%
unite(col = spp, SpeciesScientific, SpeciesCommon, SpeciesCode, sep = " - ") %>%
select(-grp_mean)
ock_sum$`1`[ock_sum$`1` == 0] <- NA
ock_sum$`2`[ock_sum$`2` == 0] <- NA
ock_sum$`3`[ock_sum$`3` == 0] <- NA
ock_sum$`4`[ock_sum$`4` == 0] <- NA
ock_sum <-
ock_sum %>%
pivot_longer(-spp, names_to = "segment", values_to = "abund") %>%
mutate(segment = as.numeric(segment))
ggplot(data = ock_sum, aes(x = segment, y = spp, fill = abund)) +
geom_raster() +
scale_y_reverse()
library(tidyverse)
ock <- read.csv("data/csv/ock_all_20230418.csv")
ock_sum <-
ock %>%
mutate(year = lubridate::year(as.Date(Date, "%m/%d/%Y"))) %>%
group_by(SpeciesScientific, SpeciesCommon, SpeciesCode, Segment) %>%
summarise(total = sum(Count, na.rm = TRUE), .groups = "keep") %>%
arrange(Segment) %>%
pivot_wider(names_from = Segment, values_from = total, values_fill = 0) %>%
mutate(grp_mean = (`1` + `2` + `3` + `4`)/4) %>%
mutate(across(where(is.numeric), ~ .x/grp_mean)) %>%
arrange(desc(SpeciesScientific)) %>%
unite(col = spp, SpeciesScientific, SpeciesCommon, SpeciesCode, sep = " - ") %>%
select(-grp_mean)
ock_sum$`1`[ock_sum$`1` == 0] <- NA
ock_sum$`2`[ock_sum$`2` == 0] <- NA
ock_sum$`3`[ock_sum$`3` == 0] <- NA
ock_sum$`4`[ock_sum$`4` == 0] <- NA
ock_sum <-
ock_sum %>%
pivot_longer(-spp, names_to = "segment", values_to = "abund") %>%
mutate(segment = as.numeric(segment))
ggplot(data = ock_sum, aes(x = segment, y = spp, fill = abund)) +
geom_raster()
View(ock_sum)
#| include: true
#| eval: true
if(!is.null(parameters$data)) {
ltm_sites <-
format_siteList(
parameters$data,
column_mapping = parameters$column_mapping,
column_fill = list(Waterbody = parameters$river),
method = site_selection_method)
}
#| include: false
parameters <- params
if("column_mapping" %in% names(parameters)) {
parameters$column_mapping <- eval(parse(text = parameters$column_mapping))
}
if(Sys.getenv("RSTUDIO_CHILD_PROCESS_PANE") == "") {
parameters$data = paste("../", parameters$data, sep = "")
}
# Waterbody = character(),
#           type = character(),
#           ident = character(),
#           Latitude = numeric(),
#           Longitude = numeric(),
#           Habitat = character(),
#           Zone = integer(),
#           Grid = integer(),
#           Minigrid = integer(),
#           Exclude = logical())
title = paste(parameters$river, parameters$target, parameters$year, sep=" ")
out_dir = "_output"
file_name = stringr::str_replace_all(paste(parameters$river, parameters$target, parameters$year, sep="_")," ", "_")
source("R/ltm_site_selection.R")
#| include: true
#| eval: true
if(!is.null(parameters$data)) {
ltm_sites <-
format_siteList(
parameters$data,
column_mapping = parameters$column_mapping,
column_fill = list(Waterbody = parameters$river),
method = site_selection_method)
}
rand_sites = random_sites(waterbody = parameters$river, sitelist = ltm_sites)
#| eval: true
#| results: asis
#| echo: false
if(site_selection_method == "center-line") {
for(x in 1:length(levels(rand_sites$Zone))){
tab = rand_sites %>%
filter(Zone == levels(rand_sites$Zone)[[x]]) %>%
dplyr::select(Site = ident,
Longitude,
Latitude,
Segment = Zone,
Selection = selection)
knitr::kable(
tab %>%
dplyr::mutate_at(c("Longitude","Latitude"), ~base::format(.,digits = 7)),
format= "html",
aption = paste("Segment:",levels(rand_sites$Zone)[[x]], sep=" "),
booktabs = TRUE,
longtable = TRUE,
align = "c") %>%
kableExtra::kable_paper("hover", full_width = F) %>%
kableExtra::kable_styling(latex_options = c("hold_position"), font_size = 14) %>%
kableExtra::row_spec(which(tab$Selection == "Alternate"), background = "#ECECEC") %>%
print()
}
} else if (site_selection_method == "grid") {
for(x in 1:length(levels(rand_sites$Zone))){
tab = rand_sites %>%
filter(Zone == levels(rand_sites$Zone)[[x]]) %>%
dplyr::select(Site = ident,
Longitude,
Latitude,
Segment = Zone,
Grid,
Minigrid,
Type = Habitat,
Selection = selection)
knitr::kable(
tab %>%
dplyr::mutate_at(c("Longitude","Latitude"), ~base::format(.,digits = 7)),
format= "html",
aption = paste("Segment:",levels(rand_sites$Zone)[[x]], sep=" "),
booktabs = TRUE,
longtable = TRUE,
align = "c") %>%
kableExtra::kable_paper("hover", full_width = F) %>%
kableExtra::kable_styling(latex_options = c("hold_position"), font_size = 14) %>%
kableExtra::row_spec(which(tab$Selection == "Alternate"), background = "#ECECEC") %>%
print()
}
#| eval: true
#| results: asis
#| echo: false
for(x in 1:length(levels(rand_sites$Zone))){
tab <- if(site_selection_method == "center-line") {
rand_sites %>%
filter(Zone == levels(rand_sites$Zone)[[x]]) %>%
dplyr::select(Site = ident,
Longitude,
Latitude,
Segment = Zone,
Selection = selection)
} else if(site_selection_method == "grid") {
rand_sites %>%
filter(Zone == levels(rand_sites$Zone)[[x]]) %>%
dplyr::select(Site = ident,
Longitude,
Latitude,
Segment = Zone,
Grid,
Minigrid,
Type = Habitat,
Selection = selection)
}
knitr::kable(
tab %>%
dplyr::mutate_at(c("Longitude","Latitude"), ~base::format(.,digits = 7)),
format= "html",
aption = paste("Segment:",levels(rand_sites$Zone)[[x]], sep=" "),
booktabs = TRUE,
longtable = TRUE,
align = "c") %>%
kableExtra::kable_paper("hover", full_width = F) %>%
kableExtra::kable_styling(latex_options = c("hold_position"), font_size = 14) %>%
kableExtra::row_spec(which(tab$Selection == "Alternate"), background = "#ECECEC") %>%
print()
}
